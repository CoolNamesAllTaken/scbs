Version 4
SHEET 1 1196 1124
WIRE 1120 -96 -208 -96
WIRE 640 -48 368 -48
WIRE 112 -16 48 -16
WIRE 208 -16 176 -16
WIRE 560 -16 464 -16
WIRE 640 0 640 -48
WIRE 368 16 368 -48
WIRE 464 48 464 -16
WIRE 464 48 448 48
WIRE 480 48 464 48
WIRE 560 48 560 -16
WIRE 576 48 560 48
WIRE 48 80 48 -16
WIRE 96 80 48 80
WIRE 208 80 208 -16
WIRE 208 80 176 80
WIRE 256 80 208 80
WIRE 368 112 368 96
WIRE 448 112 448 48
WIRE 448 112 368 112
WIRE 640 112 640 96
WIRE 752 112 640 112
WIRE 768 112 752 112
WIRE 816 112 768 112
WIRE 944 112 896 112
WIRE 960 112 944 112
WIRE 1056 112 960 112
WIRE 1088 112 1056 112
WIRE 1120 112 1120 -96
WIRE 1120 112 1088 112
WIRE 368 144 368 112
WIRE 640 144 640 112
WIRE 1120 144 1120 112
WIRE 112 160 112 144
WIRE 1056 160 1056 112
WIRE -208 176 -208 -96
WIRE -96 176 -208 176
WIRE 48 176 48 80
WIRE 48 176 -16 176
WIRE 80 176 48 176
WIRE 304 192 144 192
WIRE 752 192 752 112
WIRE -304 208 -336 208
WIRE -240 208 -304 208
WIRE -112 208 -160 208
WIRE -48 208 -112 208
WIRE 80 208 64 208
WIRE 960 208 960 112
WIRE -528 240 -528 224
WIRE -336 240 -336 208
WIRE -112 240 -112 208
WIRE -64 240 -112 240
WIRE -48 240 -48 208
WIRE -32 240 -48 240
WIRE 64 240 64 208
WIRE 64 240 48 240
WIRE 112 240 112 224
WIRE -64 256 -64 240
WIRE 640 256 640 224
WIRE 1056 256 1056 224
WIRE 1120 256 1120 224
WIRE 368 272 368 240
WIRE 368 288 368 272
WIRE -112 336 -112 320
WIRE -64 336 -64 320
WIRE -64 336 -112 336
WIRE -112 352 -112 336
WIRE -528 368 -528 320
WIRE -400 368 -400 208
WIRE -336 368 -336 320
WIRE -336 368 -400 368
WIRE -336 400 -336 368
WIRE 368 416 368 368
WIRE 752 416 752 272
WIRE 768 416 768 368
WIRE 768 416 752 416
WIRE 960 416 960 288
WIRE 960 416 880 416
WIRE 752 448 752 416
WIRE 848 448 848 368
WIRE 880 448 880 416
WIRE 960 480 960 416
WIRE -400 496 -400 368
WIRE -336 496 -336 480
WIRE -336 496 -400 496
WIRE -336 528 -336 496
WIRE 752 560 752 528
WIRE 864 592 864 512
WIRE 960 592 960 560
WIRE 960 592 864 592
WIRE 752 704 736 704
WIRE 864 704 864 592
WIRE 864 704 832 704
WIRE 736 752 736 704
WIRE 736 832 736 816
FLAG -528 368 0
FLAG 112 144 5v
FLAG 112 240 0
FLAG 368 -48 5v
FLAG -528 224 5v
FLAG 368 416 0
FLAG 640 256 0
FLAG 1120 256 0
FLAG 896 480 5v
FLAG 832 480 0
FLAG 752 560 0
FLAG 1088 112 out
FLAG 736 704 csense
FLAG 768 112 up
FLAG 944 112 dn
FLAG -336 528 0
FLAG -304 208 cmd
FLAG 1056 256 0
FLAG -112 352 0
FLAG 256 80 hello
FLAG 368 272 hello
FLAG 736 832 0
SYMBOL voltage -528 224 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL npn 304 144 R0
SYMATTR InstName Q1
SYMATTR Value 2n3904
SYMBOL res 352 0 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL pnp 576 96 M180
SYMATTR InstName Q2
SYMATTR Value 2n2907
SYMBOL res 624 128 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 800 96 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL res 1104 128 R0
SYMATTR InstName R6
SYMATTR Value 22.5
SYMBOL res 736 176 R0
SYMATTR InstName R7
SYMATTR Value 500k
SYMBOL res 944 192 R0
SYMATTR InstName R8
SYMATTR Value 500k
SYMBOL OpAmps\\UniversalOpAmp2 864 480 R90
SYMATTR InstName U2
SYMBOL res 944 464 R0
SYMATTR InstName R9
SYMATTR Value 8.25Meg
SYMBOL res 768 432 M0
SYMATTR InstName R10
SYMATTR Value 8.25Meg
SYMBOL voltage -336 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -100 103 Left 2
SYMATTR Value SINE(2.25 2.25 100)
SYMATTR InstName V2
SYMBOL res 576 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL OpAmps\\UniversalOpAmp2 112 192 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=10k GBW=10Meg Slew=18Meg
SYMBOL cap 1040 160 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res -144 192 R90
WINDOW 0 50 98 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -96 336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 2k
SYMBOL res 0 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -13 11 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 192 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 2k
SYMBOL res 352 272 R0
SYMATTR InstName R11
SYMATTR Value 1
SYMBOL cap 176 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMBOL cap -80 256 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMBOL voltage -336 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 4.5 0 1n 1n 50m 100m)
SYMBOL res 848 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap 720 752 R0
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL voltage 64 240 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V4
SYMATTR Value 3m
SYMBOL voltage 752 368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V5
SYMATTR Value 3m
TEXT 128 432 Left 2 ;Q1 inverts ouptut polarity\nand provides base drive for
TEXT -400 640 Left 2 !.tran 0 100m 0 1u
