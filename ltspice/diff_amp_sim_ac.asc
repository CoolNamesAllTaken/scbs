Version 4
SHEET 1 1300 1124
WIRE 1120 -96 -288 -96
WIRE 640 -48 368 -48
WIRE 640 0 640 -48
WIRE 304 16 304 -48
WIRE 368 16 368 -48
WIRE 0 32 -48 32
WIRE -288 48 -288 -96
WIRE 480 48 448 48
WIRE 576 48 560 48
WIRE 304 112 304 80
WIRE 368 112 368 96
WIRE 368 112 304 112
WIRE 448 112 448 48
WIRE 448 112 368 112
WIRE 640 112 640 96
WIRE 752 112 640 112
WIRE 768 112 752 112
WIRE 816 112 768 112
WIRE 944 112 896 112
WIRE 960 112 944 112
WIRE 1056 112 960 112
WIRE 1088 112 1056 112
WIRE 1120 112 1120 -96
WIRE 1120 112 1088 112
WIRE 368 144 368 112
WIRE 640 144 640 112
WIRE 1056 144 1056 112
WIRE 1120 144 1120 112
WIRE 32 160 32 144
WIRE -288 176 -288 128
WIRE -240 176 -288 176
WIRE -160 176 -240 176
WIRE -48 176 -48 32
WIRE -48 176 -80 176
WIRE -16 176 -48 176
WIRE 0 176 -16 176
WIRE 112 192 64 192
WIRE 304 192 192 192
WIRE 752 192 752 112
WIRE 0 208 -96 208
WIRE 960 208 960 112
WIRE -96 224 -96 208
WIRE -96 224 -160 224
WIRE 1056 224 1056 208
WIRE -368 240 -368 224
WIRE -96 240 -96 224
WIRE 32 240 32 224
WIRE 640 256 640 224
WIRE 1120 256 1120 224
WIRE -160 320 -160 224
WIRE -96 320 -160 320
WIRE 752 336 752 272
WIRE 832 336 752 336
WIRE 960 336 960 288
WIRE 960 336 896 336
WIRE -96 352 -96 320
WIRE -368 368 -368 320
WIRE 752 416 752 336
WIRE 848 416 752 416
WIRE 960 416 960 336
WIRE 960 416 880 416
WIRE 368 432 368 240
WIRE 752 448 752 416
WIRE 848 448 848 416
WIRE 880 448 880 416
WIRE 960 480 960 416
WIRE 752 560 752 528
WIRE 864 592 864 512
WIRE 912 592 864 592
WIRE 960 592 960 560
WIRE 960 592 912 592
FLAG -368 368 0
FLAG -96 352 0
FLAG 32 144 5v
FLAG 32 240 0
FLAG 368 -48 5v
FLAG -368 224 5v
FLAG 368 432 0
FLAG 640 256 0
FLAG 1120 256 0
FLAG 896 480 5v
FLAG 832 480 0
FLAG 752 560 0
FLAG 1088 112 out
FLAG 912 592 csense
FLAG 768 112 up
FLAG 944 112 dn
FLAG -240 176 fb
FLAG -16 176 inm
FLAG 1056 224 0
SYMBOL voltage -368 224 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -176 176 R270
WINDOW 3 -67 10 VRight 2
WINDOW 123 -43 -9 VRight 2
WINDOW 39 0 0 Left 0
WINDOW 0 -17 -4 VRight 2
SYMATTR Value 0
SYMATTR Value2 AC 1
SYMATTR InstName V2
SYMBOL npn 304 144 R0
SYMATTR InstName Q1
SYMATTR Value 2n3904
SYMBOL res 352 0 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL pnp 576 96 M180
SYMATTR InstName Q2
SYMATTR Value 2n3906
SYMBOL res 624 128 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -304 32 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 800 96 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL res 1104 128 R0
SYMATTR InstName R6
SYMATTR Value 25
SYMBOL res 736 176 R0
SYMATTR InstName R7
SYMATTR Value 500k
SYMBOL res 944 192 R0
SYMATTR InstName R8
SYMATTR Value 500k
SYMBOL OpAmps\\UniversalOpAmp2 864 480 R90
SYMATTR InstName U2
SYMBOL res 944 464 R0
SYMATTR InstName R9
SYMATTR Value 8.25Meg
SYMBOL res 768 432 M0
SYMATTR InstName R10
SYMATTR Value 8.25Meg
SYMBOL cap 896 320 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1p
SYMBOL res 576 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL cap 320 16 M0
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMBOL voltage -96 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3
SYMBOL OpAmps\\UniversalOpAmp3 32 192 R0
SYMATTR InstName U1
SYMBOL cap 1040 144 R0
SYMATTR InstName C5
SYMATTR Value 1µ
TEXT 136 608 Left 2 ;Q1 inverts ouptut polarity\nand provides base drive for
TEXT -400 640 Left 2 !.ac dec 1000 1m 1G
