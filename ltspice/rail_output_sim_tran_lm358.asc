Version 4
SHEET 1 1196 1124
WIRE 1120 -96 -192 -96
WIRE 640 -48 368 -48
WIRE 640 0 640 -48
WIRE 368 16 368 -48
WIRE 480 48 448 48
WIRE 576 48 560 48
WIRE 304 112 304 80
WIRE 368 112 368 96
WIRE 368 112 304 112
WIRE 448 112 448 48
WIRE 448 112 368 112
WIRE 640 112 640 96
WIRE 752 112 640 112
WIRE 768 112 752 112
WIRE 816 112 768 112
WIRE 944 112 896 112
WIRE 960 112 944 112
WIRE 1056 112 960 112
WIRE 1088 112 1056 112
WIRE 1120 112 1120 -96
WIRE 1120 112 1088 112
WIRE 640 128 640 112
WIRE 640 128 560 128
WIRE 368 144 368 112
WIRE 640 144 640 128
WIRE 1120 144 1120 112
WIRE 128 160 128 144
WIRE 560 160 560 128
WIRE 1056 160 1056 112
WIRE -192 176 -192 -96
WIRE 96 176 -192 176
WIRE 176 192 160 192
WIRE 304 192 256 192
WIRE 752 192 752 112
WIRE 48 208 16 208
WIRE 96 208 48 208
WIRE 960 208 960 112
WIRE 256 224 256 192
WIRE -368 240 -368 224
WIRE 16 240 16 208
WIRE 128 240 128 224
WIRE 560 240 560 224
WIRE 640 256 640 224
WIRE 1056 256 1056 224
WIRE 1120 256 1120 224
WIRE 368 288 368 240
WIRE 256 304 256 288
WIRE 752 336 752 272
WIRE 832 336 752 336
WIRE 960 336 960 288
WIRE 960 336 896 336
WIRE 16 352 16 320
WIRE -368 368 -368 320
WIRE 752 416 752 336
WIRE 848 416 752 416
WIRE 960 416 960 336
WIRE 960 416 880 416
WIRE 752 448 752 416
WIRE 848 448 848 416
WIRE 880 448 880 416
WIRE 960 480 960 416
WIRE 752 560 752 528
WIRE 864 592 864 512
WIRE 912 592 864 592
WIRE 960 592 960 560
WIRE 960 592 912 592
FLAG -368 368 0
FLAG 128 144 5v
FLAG 128 240 0
FLAG 368 -48 5v
FLAG -368 224 5v
FLAG 368 288 0
FLAG 640 256 0
FLAG 1120 256 0
FLAG 896 480 5v
FLAG 832 480 0
FLAG 752 560 0
FLAG 1088 112 out
FLAG 912 592 csense
FLAG 768 112 up
FLAG 944 112 dn
FLAG 16 352 0
FLAG 48 208 cmd
FLAG 256 304 0
FLAG 1056 256 0
SYMBOL voltage -368 224 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL npn 304 144 R0
SYMATTR InstName Q1
SYMATTR Value 2n3904
SYMBOL res 352 0 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL pnp 576 96 M180
SYMATTR InstName Q2
SYMATTR Value 2n3906
SYMBOL res 624 128 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 800 96 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL res 1104 128 R0
SYMATTR InstName R6
SYMATTR Value 22.5
SYMBOL res 736 176 R0
SYMATTR InstName R7
SYMATTR Value 500k
SYMBOL res 944 192 R0
SYMATTR InstName R8
SYMATTR Value 500k
SYMBOL OpAmps\\UniversalOpAmp2 864 480 R90
SYMATTR InstName U2
SYMBOL res 944 464 R0
SYMATTR InstName R9
SYMATTR Value 8.25Meg
SYMBOL res 768 432 M0
SYMATTR InstName R10
SYMATTR Value 8.25Meg
SYMBOL cap 896 320 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1p
SYMBOL cap 288 16 R0
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMBOL cap 544 160 R0
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL voltage 16 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(2.25 1 100)
SYMBOL res 576 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL res 272 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL cap 240 224 R0
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL cap 1040 160 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL OpAmps\\opamp2 128 128 R0
WINDOW 3 -88 -38 Left 2
SYMATTR Value LMX58_LM2904
SYMATTR InstName U1
TEXT 128 432 Left 2 ;Q1 inverts ouptut polarity\nand provides base drive for
TEXT -400 640 Left 2 !.tran 0 100m 0 uic
TEXT 40 -256 Left 2 !.lib lmx58_lm2904.lib
